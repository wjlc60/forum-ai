define ("mod_forum/favourite_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/str","core/custom_interaction_events"],function(a,b,c,d,e,f,g){var h=function(h){h.on("click",e.favourite.toggle,function(g){var e=a(this),h=e.data("forumid"),i=e.data("discussionid"),j=e.data("targetstate");d.setFavouriteDiscussionState(h,i,j).then(function(a){return b.render("mod_forum/discussion_favourite_toggle",a)}).then(function(a,c){return b.replaceNode(e,a,c)}).then(function(){return f.get_string("favouriteupdated","forum").done(function(a){return c.addNotification({message:a,type:"info"})})}).catch(c.exception);g.preventDefault()});h.on(g.events.activate,e.favourite.toggleSwitch,function(b){var e=a(this),g=e.data("forumid"),h=e.data("discussionid"),i=e.data("targetstate");d.setFavouriteDiscussionState(g,h,i).then(function(a){var b=a.userstate.favourited?0:1;return e.data("targetstate",b)}).then(function(){return f.get_string("favouriteupdated","forum")}).then(function(a){return c.addNotification({message:a,type:"info"})}).catch(c.exception);b.preventDefault()})};return{init:function init(a){h(a)}}});
//# sourceMappingURL=favourite_toggle.min.js.map
