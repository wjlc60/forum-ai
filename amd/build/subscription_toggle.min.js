define ("mod_forum/subscription_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/pubsub","mod_forum/forum_events","core/custom_interaction_events"],function(a,b,c,d,e,f,g,h){var i=function(i){i.on("click",e.subscription.toggle,function(h){var e=a(this),i=e.data("forumid"),j=e.data("discussionid"),k=e.data("targetstate");d.setDiscussionSubscriptionState(i,j,k).then(function(a){f.publish(g.SUBSCRIPTION_TOGGLED,{discussionId:j,subscriptionState:k});return b.render("mod_forum/discussion_subscription_toggle",a)}).then(function(a,c){return b.replaceNode(e,a,c)}).catch(c.exception);h.preventDefault()});i.on(h.events.activate,e.subscription.toggleSwitch,function(b){var e=a(this),h=e.data("forumid"),i=e.data("discussionid"),j=e.data("targetstate");d.setDiscussionSubscriptionState(h,i,j).then(function(a){var b=a.userstate.subscribed?0:1;e.data("targetstate",b);return f.publish(g.SUBSCRIPTION_TOGGLED,{discussionId:i,subscriptionState:a.userstate.subscribed})}).catch(c.exception);b.preventDefault()})};return{init:function init(a){i(a)}}});
//# sourceMappingURL=subscription_toggle.min.js.map
